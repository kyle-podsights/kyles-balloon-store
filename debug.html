<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-MWCCVKB');</script>
    <!-- End Google Tag Manager -->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Kyle's Balloon Store</title>

    <link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" />
    <link rel="stylesheet" href="styles.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body style="background-image: url(images/blue-snow.webp);">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MWCCVKB" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <main>
        <nav class="navbar navbar-expand-lg bg-body-tertiary">
            <div class="container-fluid">
                <a class="navbar-brand">Kyle's Balloon Store</a>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <button type="button" class="btn btn-outline-primary navbar-button"
                                onclick="location.href='index.html'">Home</button>
                        </li>
                        <li class="nav-item">
                            <button type="button" class="btn btn-outline-primary navbar-button"
                                onclick="location.href='store.html'">Store</button>
                        </li>
                        <li class="nav-item">
                            <button type="button" class="btn btn-outline-primary navbar-button"
                                onclick="location.href='newsletter.html'">Newsletter</button>
                        </li>
                    </ul>
                    <button class="btn d-flex" onclick="location.href='debug.html'"><i class="fa fa-bug"></i></button>
                </div>
            </div>
        </nav>


        <div class="vstack gap-4 col-md-5 mx-auto">
            <h1 class="home-title">Debug Page</h1>

            <h6 class="home-title">Click a button to trigger the pixel event associated with it</h6>
            <button type="button" class="btn btn-primary home-button" onClick="pageView()">Page View</button>
            <button type="button" class="btn btn-primary home-button" onClick="pageViewAlias()">Page View with Alias</button>
            <button type="button" class="btn btn-primary home-button" onClick="aliasConf()">Alias with Conf Set</button>
            <button type="button" class="btn btn-primary home-button" onClick="purchaseEvent()">Purchase Event</button>
            <button type="button" class="btn btn-primary home-button" onClick="newsletterSignupEvent()">
                Newsletter Signup Event
            </button>
            <button type="button" class="btn btn-primary home-button" onClick="gtmPageView()">
                GTM Page View
            </button>
            <button type="button" class="btn btn-primary home-button" onClick="gtmPurchaseEvent()">
                GTM Purchase Event
            </button>
            <button type="button" class="btn btn-primary home-button" onClick="gtmNewsletterSignupEvent()">
                GTM Newsletter Signup Event
            </button>
            <button type="button" class="btn btn-primary home-button" onclick="location.href='image_view.html'">
                Image Page View
            </button>
            <button type="button" class="btn btn-primary home-button" onclick="location.href='alternate_pixel.html'">
                Emmett's Test Brand
            </button>
            <button type="button" class="btn btn-danger home-button" onClick="twoPageViewDiffPixel()" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-title="Lumps events under same pixel key when they are fired in tandem">
                Two Page Views - Different Pixels
            </button>
            <button type="button" class="btn btn-danger home-button" onClick="emmettsBrandPageView()" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-title="Since the first pixel's key was already configured on the initial page view the following conf doesn't update the key when this event fires. So clicking this will send an event to the first pixel.">
                Fire Page View Emmett's Brand
            </button>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>

    <script>
        // Enable Tooltips
        const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
        const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))

        // Functions for various cases
        function pageView() {
            console.log("Triggered Page View");
            // Installation script generated by Podsights
            (function (w, d) {
                var id = "pdst-capture", n = "script";
                if (!d.getElementById(id)) {
                    w.pdst =
                        w.pdst ||
                        function () {
                            (w.pdst.q = w.pdst.q || []).push(arguments);
                        };
                    var e = d.createElement(n); e.id = id; e.async = 1;
                    e.src = "https://cdn.pdst.fm/ping.min.js";
                    var s = d.getElementsByTagName(n)[0];
                    s.parentNode.insertBefore(e, s);
                }
                // Commenting out the conf since it gets set on initial page load
                // w.pdst("conf", { key: "cee92226ff354219945e4e06c9dce597" });
                w.pdst("view");
            })(window, document);
        }

        function aliasConf() {
            console.log("Triggered Page View");
            (function (w, d) {
                var id = "pdst-capture", n = "script";
                if (!d.getElementById(id)) {
                    w.pdst =
                        w.pdst ||
                        function () {
                            (w.pdst.q = w.pdst.q || []).push(arguments);
                        };
                    var e = d.createElement(n); e.id = id; e.async = 1;
                    e.src = "https://cdn.pdst.fm/ping.min.js";
                    var s = d.getElementsByTagName(n)[0];
                    s.parentNode.insertBefore(e, s);
                }
                w.pdst("conf", { key: "cee92226ff354219945e4e06c9dce597" });
                w.pdst('alias', { id: Math.random().toString(16).slice(2)});
            })(window, document);
        }

        function pageViewAlias() {
            console.log("Triggered Page View");
            // Installation script generated by Podsights
            (function (w, d) {
                var id = "pdst-capture", n = "script";
                if (!d.getElementById(id)) {
                    w.pdst =
                        w.pdst ||
                        function () {
                            (w.pdst.q = w.pdst.q || []).push(arguments);
                        };
                    var e = d.createElement(n); e.id = id; e.async = 1;
                    e.src = "https://cdn.pdst.fm/ping.min.js";
                    var s = d.getElementsByTagName(n)[0];
                    s.parentNode.insertBefore(e, s);
                }
                // Commenting out the conf since it gets set on initial page load
                // w.pdst("conf", { key: "cee92226ff354219945e4e06c9dce597" });
                w.pdst('alias', { id: Math.random().toString(16).slice(2)});
                w.pdst("view");
            })(window, document);
        }

        function purchaseEvent() {
            console.log("Triggered Purchase Event");
            // Installation script generated by Podsights
            (function (w, d) {
                var id = 'pdst-capture', n = 'script';
                if (!d.getElementById(id)) {
                    w.pdst =
                        w.pdst ||
                        function () {
                            (w.pdst.q = w.pdst.q || []).push(arguments);
                        };
                    var e = d.createElement(n); e.id = id; e.async = 1;
                    e.src = 'https://cdn.pdst.fm/ping.min.js';
                    var s = d.getElementsByTagName(n)[0];
                    s.parentNode.insertBefore(e, s);
                }
                // Commenting out the conf since it gets set on initial page load
                // w.pdst('conf', { key: 'cee92226ff354219945e4e06c9dce597' });
                w.pdst('purchase', {
                    order_id: '',  // Dynamically populate from session data
                    discount_code: '',  // Dynamically populate from session data
                    is_new_customer: '',  // Dynamically populate from session data
                    value: '',  // Dynamically populate from session data
                    currency: '',
                });
            })(window, document);
        }

        function newsletterSignupEvent() {
            console.log("Triggered Newsletter Signup Event");
            // Installation script generated by Podsights
            (function (w, d) {
                var id = 'pdst-capture', n = 'script';
                if (!d.getElementById(id)) {
                    w.pdst =
                        w.pdst ||
                        function () {
                            (w.pdst.q = w.pdst.q || []).push(arguments);
                        };
                    var e = d.createElement(n); e.id = id; e.async = 1;
                    e.src = 'https://cdn.pdst.fm/ping.min.js';
                    var s = d.getElementsByTagName(n)[0];
                    s.parentNode.insertBefore(e, s);
                }
                w.pdst('conf', { key: 'cee92226ff354219945e4e06c9dce597' });
                w.pdst('lead', {
                    category: 'Newsletter Signup',
                    type: '',  // Dynamically populate from session data
                    value: '',  // Dynamically populate from session data
                    currency: '',
                });
            })(window, document);
        }

        function gtmPageView() {
            console.log("Triggered GTM Page View")
            dataLayer.push({ "event": "pageview-debug-click" })
        }

        function gtmPurchaseEvent() {
            console.log("Triggered GTM Purchase Event")
            dataLayer.push({ "event": "purchaseevent-debug-click" })
        }

        function gtmNewsletterSignupEvent() {
            console.log("Triggered GTM Newsletter Signup")
            dataLayer.push({ "event": "newslettersignup-debug-click" })
        }

        function twoPageViewDiffPixel() {
            // Trigger Page view for emmett's brand
            (function (w, d) {
                var id = 'pdst-capture', n = 'script';
                if (!d.getElementById(id)) {
                    w.pdst =
                        w.pdst ||
                        function () {
                            (w.pdst.q = w.pdst.q || []).push(arguments);
                        };
                    var e = d.createElement(n); e.id = id; e.async = 1;
                    e.src = 'https://cdn.pdst.fm/ping.min.js';
                    var s = d.getElementsByTagName(n)[0];
                    s.parentNode.insertBefore(e, s);
                }
                w.pdst('conf', { key: 'fdfb72a9fc4a4b40a5a20de7dec6b230' });
                w.pdst("view");

            })(window, document);
            
            // Trigger page view for kyle's brand
            (function (w, d) {
                var id = "pdst-capture", n = "script";
                if (!d.getElementById(id)) {
                    w.pdst =
                        w.pdst ||
                        function () {
                            (w.pdst.q = w.pdst.q || []).push(arguments);
                        };
                    var e = d.createElement(n); e.id = id; e.async = 1;
                    e.src = "https://cdn.pdst.fm/ping.min.js";
                    var s = d.getElementsByTagName(n)[0];
                    s.parentNode.insertBefore(e, s);
                }
                // Commenting out the conf since it gets set on initial page load
                w.pdst("conf", { key: "cee92226ff354219945e4e06c9dce597" });
                w.pdst("view");
            })(window, document);
        }

        function emmettsBrandPageView() {
            // Trigger Page view for emmett's brand
            (function (w, d) {
                var id = 'pdst-capture', n = 'script';
                if (!d.getElementById(id)) {
                    w.pdst =
                        w.pdst ||
                        function () {
                            (w.pdst.q = w.pdst.q || []).push(arguments);
                        };
                    var e = d.createElement(n); e.id = id; e.async = 1;
                    e.src = 'https://cdn.pdst.fm/ping.min.js';
                    var s = d.getElementsByTagName(n)[0];
                    s.parentNode.insertBefore(e, s);
                }
                w.pdst('conf', { key: 'fdfb72a9fc4a4b40a5a20de7dec6b230' });
                w.pdst("view");

            })(window, document);
        }
    </script>

    <script>
        // Page view when going to debug page. Sets conf with pixel 
        // id so the others don't need to

        // Installation script generated by Podsights
        (function (w, d) {
            var id = "pdst-capture", n = "script";
            if (!d.getElementById(id)) {
                w.pdst =
                    w.pdst ||
                    function () {
                        (w.pdst.q = w.pdst.q || []).push(arguments);
                    };
                var e = d.createElement(n); e.id = id; e.async = 1;
                e.src = "https://cdn.pdst.fm/ping.min.js";
                var s = d.getElementsByTagName(n)[0];
                s.parentNode.insertBefore(e, s);
            }
            // Commenting out the conf since it gets set on initial page load
            w.pdst("conf", { key: "cee92226ff354219945e4e06c9dce597" });
            w.pdst("view");
        })(window, document);
    </script>
</body>

</html>